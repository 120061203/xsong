---
export interface Props {
	title: string;
	description?: string;
}

const { title, description = "分享我的想法、技術心得和生活點滴" } = Astro.props;
---

<!doctype html>
<html lang="zh-TW">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
		<script is:inline src="https://cdn.tailwindcss.com"></script>
		
		<!-- 自定義部落格樣式 -->
		<style is:inline>
			/* 部落格文章樣式 */
			.prose {
				/* 基礎排版 */
				line-height: 1.8;
				color: #374151;
			}

			.dark .prose {
				color: #d1d5db;
			}

			/* 標題樣式 */
			.prose h1 {
				font-size: 2.25rem;
				font-weight: 700;
				line-height: 1.2;
				margin-top: 2.5rem;
				margin-bottom: 1.5rem;
				color: #111827;
				border-bottom: 2px solid #e5e7eb;
				padding-bottom: 0.5rem;
			}

			.dark .prose h1 {
				color: #f9fafb;
				border-bottom-color: #374151;
			}

			.prose h2 {
				font-size: 1.875rem;
				font-weight: 600;
				line-height: 1.3;
				margin-top: 2rem;
				margin-bottom: 1rem;
				color: #111827;
				border-left: 4px solid #3b82f6;
				padding-left: 1rem;
			}

			.dark .prose h2 {
				color: #f9fafb;
				border-left-color: #10b981;
			}

			.prose h3 {
				font-size: 1.5rem;
				font-weight: 600;
				line-height: 1.4;
				margin-top: 1.75rem;
				margin-bottom: 0.75rem;
				color: #111827;
			}

			.dark .prose h3 {
				color: #f9fafb;
			}

			.prose h4 {
				font-size: 1.25rem;
				font-weight: 600;
				line-height: 1.4;
				margin-top: 1.5rem;
				margin-bottom: 0.5rem;
				color: #111827;
			}

			.dark .prose h4 {
				color: #f9fafb;
			}

			/* 段落樣式 */
			.prose p {
				margin-top: 1.25rem;
				margin-bottom: 1.25rem;
				line-height: 1.8;
				font-size: 1.125rem;
			}

			/* 列表樣式 */
			.prose ul, .prose ol {
				margin-top: 1.25rem;
				margin-bottom: 1.25rem;
				padding-left: 1.5rem;
			}

			.prose li {
				margin-top: 0.5rem;
				margin-bottom: 0.5rem;
				line-height: 1.7;
			}

			.prose ul li {
				list-style-type: disc;
			}

			.prose ol li {
				list-style-type: decimal;
			}

			/* 引用塊樣式 */
			.prose blockquote {
				margin: 2rem 0;
				padding: 1.5rem;
				background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
				border-left: 4px solid #3b82f6;
				border-radius: 0.5rem;
				font-style: italic;
				position: relative;
			}

			.dark .prose blockquote {
				background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
				border-left-color: #10b981;
			}

			.prose blockquote::before {
				content: '"';
				font-size: 3rem;
				color: #3b82f6;
				position: absolute;
				top: -0.5rem;
				left: 1rem;
				font-family: serif;
			}

			.dark .prose blockquote::before {
				color: #10b981;
			}

			.prose blockquote p {
				margin: 0;
				font-size: 1.125rem;
				line-height: 1.7;
			}

			/* 程式碼樣式 */
			.prose code {
				background-color: #f3f4f6;
				color: #dc2626;
				padding: 0.25rem 0.5rem;
				border-radius: 0.25rem;
				font-size: 0.875rem;
				font-weight: 500;
			}

			.dark .prose code {
				background-color: #374151;
				color: #f87171;
			}

			.prose pre {
				background-color: #1f2937;
				color: #f9fafb;
				padding: 1.5rem;
				border-radius: 0.5rem;
				overflow-x: auto;
				margin: 2rem 0;
				border: 1px solid #374151;
			}

			.prose pre code {
				background-color: transparent;
				color: inherit;
				padding: 0;
				border-radius: 0;
				font-size: 0.875rem;
			}

			/* 連結樣式 */
			.prose a {
				color: #3b82f6;
				text-decoration: underline;
				text-decoration-thickness: 2px;
				text-underline-offset: 2px;
				transition: color 0.2s ease;
			}

			.dark .prose a {
				color: #10b981;
			}

			.prose a:hover {
				color: #2563eb;
			}

			.dark .prose a:hover {
				color: #059669;
			}

			/* 表格樣式 */
			.prose table {
				width: 100%;
				border-collapse: collapse;
				margin: 2rem 0;
				border-radius: 0.5rem;
				overflow: hidden;
				border: 1px solid #e5e7eb;
			}

			.dark .prose table {
				border-color: #374151;
			}

			.prose th {
				background-color: #f9fafb;
				color: #111827;
				font-weight: 600;
				padding: 0.75rem 1rem;
				text-align: left;
				border-bottom: 1px solid #e5e7eb;
			}

			.dark .prose th {
				background-color: #374151;
				color: #f9fafb;
				border-bottom-color: #4b5563;
			}

			.prose td {
				padding: 0.75rem 1rem;
				border-bottom: 1px solid #e5e7eb;
			}

			.dark .prose td {
				border-bottom-color: #4b5563;
			}

			/* 水平線樣式 */
			.prose hr {
				margin: 3rem 0;
				border: none;
				height: 1px;
				background: linear-gradient(90deg, transparent 0%, #e5e7eb 50%, transparent 100%);
			}

			.dark .prose hr {
				background: linear-gradient(90deg, transparent 0%, #374151 50%, transparent 100%);
			}

			/* 圖片樣式 */
			.prose img {
				border-radius: 0.5rem;
				margin: 2rem 0;
				box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
			}

			/* 強調文字 */
			.prose strong {
				font-weight: 600;
				color: #111827;
			}

			.dark .prose strong {
				color: #f9fafb;
			}

			/* 斜體文字 */
			.prose em {
				font-style: italic;
				color: #6b7280;
			}

			.dark .prose em {
				color: #9ca3af;
			}

			/* 特殊標記 */
			.prose mark {
				background-color: #fef3c7;
				color: #92400e;
				padding: 0.125rem 0.25rem;
				border-radius: 0.25rem;
			}

			.dark .prose mark {
				background-color: #451a03;
				color: #fbbf24;
			}

			/* 段落間距優化 */
			.prose > * + * {
				margin-top: 1.5rem;
			}

			.prose > * + h1,
			.prose > * + h2,
			.prose > * + h3,
			.prose > * + h4 {
				margin-top: 2.5rem;
			}

			/* 列表間距 */
			.prose ul + p,
			.prose ol + p {
				margin-top: 1.5rem;
			}

			/* 引用塊間距 */
			.prose blockquote + p {
				margin-top: 1.5rem;
			}

			/* 程式碼塊間距 */
			.prose pre + p {
				margin-top: 1.5rem;
			}

			/* Footer 樣式 */
			.footer-content {
				display: flex;
				flex-direction: row; /* 同一行顯示 */
				align-items: center;
				justify-content: center;
				gap: 1.25em;
				flex-wrap: wrap; /* 小螢幕時允許換行 */
			}
			.footer-links {
				display: flex;
				align-items: center;
				gap: 0.75em;
			}
			.footer-link {
				display: flex;
				align-items: center;
				gap: 0.5em;
				text-decoration: none;
				color: rgb(107, 114, 128);
				transition: color 0.3s ease;
			}
			.footer-link:hover {
				color: rgb(31, 41, 55);
			}
			.dark .footer-link {
				color: rgb(156, 163, 175);
			}
			.dark .footer-link:hover {
				color: rgb(249, 250, 251);
			}
			.footer-link i {
				font-size: 0.9em;
			}
			.separator {
				color: rgb(107, 114, 128);
				opacity: 0.6;
				margin: 0 0.5em;
			}
			.dark .separator {
				color: rgb(156, 163, 175);
			}
			.footer-copyright {
				font-size: 0.9em;
				opacity: 0.8;
			}
		</style>
		<script is:inline>
			tailwind.config = {
				darkMode: 'class',
				theme: {
					extend: {}
				}
			}
		</script>
	</head>
	<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white">
		<div class="flex flex-col min-h-screen">
			<!-- Navigation -->
			<nav class="sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm">
				<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
					<div class="flex justify-between items-center h-16">
						<!-- Logo -->
						<a href="/" class="text-2xl md:text-3xl font-bold text-blue-600 dark:text-green-400 hover:text-blue-700 dark:hover:text-green-300 transition-colors">
							xsong.us
						</a>

						<!-- Desktop Navigation -->
						<div class="hidden md:flex items-center space-x-8">
							<a href="/about" class="text-lg font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 transition-colors">
								About
							</a>
							<a href="/blog" class="text-lg font-medium text-blue-600 dark:text-green-400">
								Blog
							</a>
							<a href="/projects" class="text-lg font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 transition-colors">
								Projects
							</a>
							<a href="/tools" class="text-lg font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 transition-colors">
								Tools
							</a>
						</div>

						<!-- Theme Toggle and Mobile Menu Button -->
						<div class="flex items-center space-x-2">
							<!-- Theme Toggle -->
							<button
								id="theme-toggle"
								class="p-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"
								aria-label="Toggle theme"
							>
								<i class="fas fa-moon text-xl" id="theme-icon"></i>
							</button>

							<!-- Mobile Menu Button -->
							<button
								id="mobile-menu-button"
								class="md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"
								aria-label="Toggle mobile menu"
							>
								<i class="fas fa-bars text-xl" id="mobile-menu-icon"></i>
							</button>
						</div>
					</div>

					<!-- Mobile Navigation Menu -->
					<div id="mobile-menu" class="md:hidden hidden">
						<div class="px-2 pt-2 pb-3 space-y-1 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700">
							<a href="/about" class="block px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors">
								About
							</a>
							<a href="/blog" class="block px-3 py-2 text-base font-medium text-blue-600 dark:text-green-400 bg-blue-50 dark:bg-green-900/20 rounded-md">
								Blog
							</a>
							<a href="/projects" class="block px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors">
								Projects
							</a>
							<a href="/tools" class="block px-3 py-2 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-green-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors">
								Tools
							</a>
						</div>
					</div>
				</div>
			</nav>

			<!-- Main Content -->
			<main class="flex-1">
				<slot />
			</main>

			<!-- Footer -->
			<footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700">
				<div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
					<div class="footer-content">
						<div class="footer-links">
							<a href="/rss" class="footer-link">
								<i class="fas fa-rss"></i>
								RSS Feed
							</a>
							<span class="separator">|</span>
							<a href="/about#contact" class="footer-link">
								<i class="fas fa-envelope"></i>
								Contact
							</a>
						</div>
						<div class="footer-copyright">
							&copy; 2025 xsong.us All Rights Reserved
						</div>
					</div>
				</div>
			</footer>
		</div>

		<script>
			// Theme toggle functionality
			const themeToggle = document.getElementById('theme-toggle');
			const themeIcon = document.getElementById('theme-icon');
			
			// Mobile menu functionality
			const mobileMenuButton = document.getElementById('mobile-menu-button');
			const mobileMenu = document.getElementById('mobile-menu');
			const mobileMenuIcon = document.getElementById('mobile-menu-icon');
			
			// Check for saved theme preference or default to light mode
			const currentTheme = localStorage.getItem('theme') || 'light';
			document.documentElement.classList.toggle('dark', currentTheme === 'dark');
			updateThemeIcon();
			
			themeToggle.addEventListener('click', () => {
				const isDark = document.documentElement.classList.toggle('dark');
				localStorage.setItem('theme', isDark ? 'dark' : 'light');
				updateThemeIcon();
			});
			
			// Mobile menu toggle
			mobileMenuButton.addEventListener('click', () => {
				const isOpen = mobileMenu.classList.toggle('hidden');
				mobileMenuIcon.className = `fas ${isOpen ? 'fa-bars' : 'fa-times'} text-xl`;
			});
			
			// Close mobile menu when clicking outside
			document.addEventListener('click', (e) => {
				if (!mobileMenuButton.contains(e.target) && !mobileMenu.contains(e.target)) {
					mobileMenu.classList.add('hidden');
					mobileMenuIcon.className = 'fas fa-bars text-xl';
				}
			});
			
			// Close mobile menu when clicking on menu links
			const mobileMenuLinks = mobileMenu.querySelectorAll('a');
			mobileMenuLinks.forEach(link => {
				link.addEventListener('click', () => {
					mobileMenu.classList.add('hidden');
					mobileMenuIcon.className = 'fas fa-bars text-xl';
				});
			});
			
			function updateThemeIcon() {
				const isDark = document.documentElement.classList.contains('dark');
				themeIcon.className = `fas ${isDark ? 'fa-sun' : 'fa-moon'} text-xl`;
			}
		</script>
	</body>
</html>
