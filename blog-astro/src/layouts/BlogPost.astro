---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import Layout from './Layout.astro';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<Layout title={title} description={description}>
	<div class="min-h-screen bg-gray-50 dark:bg-gray-900 py-8">
		<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
			<!-- Back to Blog -->
			<div class="mb-8">
				<a 
					href="/blog"
					class="inline-flex items-center text-blue-600 dark:text-green-400 hover:text-blue-700 dark:hover:text-green-300 font-medium transition-colors"
				>
					<svg class="mr-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
					</svg>
					返回部落格
				</a>
			</div>

			<!-- Article -->
			<article class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-200 dark:border-gray-700">
				{heroImage && (
					<div class="w-full h-64 md:h-96 overflow-hidden">
						<Image 
							width={1020} 
							height={510} 
							src={heroImage} 
							alt={title}
							class="w-full h-full object-cover"
						/>
					</div>
				)}
				
				<div class="p-8">
					<!-- Header -->
					<header class="mb-8">
						<h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4">
							{title}
						</h1>
						<div class="flex items-center text-gray-500 dark:text-gray-400 text-sm">
							<time dateTime={pubDate.toISOString()}>
								{pubDate.toLocaleDateString('zh-TW', {
									year: 'numeric',
									month: 'long',
									day: 'numeric'
								})}
							</time>
							{updatedDate && (
								<>
									<span class="mx-2">•</span>
									<span>更新於 {updatedDate.toLocaleDateString('zh-TW', {
										year: 'numeric',
										month: 'long',
										day: 'numeric'
									})}</span>
								</>
							)}
						</div>
					</header>

					<!-- Content -->
					<div class="prose prose-lg max-w-none dark:prose-invert">
						<slot />
					</div>
				</div>
			</article>
		</div>
	</div>
</Layout>
